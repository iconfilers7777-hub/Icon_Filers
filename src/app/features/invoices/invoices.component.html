<div class="invoice-container">

  <!-- Header -->
  <div class="invoice-header">
    <div>
      <h3 class="invoice-title">Invoice</h3>
      <p class="invoice-subtitle">
        Add items, apply discounts and generate the final invoice amount.
      </p>
    </div>
    <div class="invoice-badge">Draft</div>
  </div>

  <!-- Items Card -->
  <div class="card items-card">
    <div class="card-title">Line Items</div>

    <!-- Table Header -->
    <div class="items-header">
      <span>Item</span>
      <span class="right-align">Amount (₹)</span>
      <span></span>
    </div>

    <!-- Rows -->
    <div *ngFor="let row of items; let i = index" class="item-row">
      <select [(ngModel)]="row.item" [name]="'item' + i" class="dropdown">
        <option value="" disabled>Select item</option>
        <option *ngFor="let item of availableItems" [value]="item">
          {{ item }}
        </option>
      </select>

      <input
        type="number"
        [(ngModel)]="row.amount"
        [name]="'amount' + i"
        class="amount-input"
        placeholder="0"
      />

      <button
        *ngIf="items.length > 1"
        class="remove-btn"
        type="button"
        (click)="removeItem(i)">
        ✕
      </button>
    </div>

    <button class="add-btn" type="button" (click)="addItem()">
      + Add another item
    </button>
  </div>

  <!-- Summary + Actions -->
  <div class="footer-grid">

    <!-- Summary -->
    <div class="card summary-box">
      <div class="card-title">Summary</div>

      <div class="summary-row">
        <span>Items Total</span>
        <strong>₹{{ itemsTotal }}</strong>
      </div>

      <div class="summary-row">
        <span>Discount</span>
        <input
          type="number"
          [(ngModel)]="discount"
          class="summary-input"
          placeholder="0"
        />
      </div>

      <div class="summary-row">
        <span>Referral Bonus</span>
        <input
          type="number"
          [(ngModel)]="referralBonus"
          class="summary-input"
          placeholder="0"
        />
      </div>

      <div class="summary-row final">
        <span>Final Amount</span>
        <strong>₹{{ finalAmount }}</strong>
      </div>
    </div>

    <!-- Save -->
    <div class="actions">
      <button class="save-btn" (click)="saveInvoice()">
        Save Invoice
      </button>
    </div>

  </div>

</div>
