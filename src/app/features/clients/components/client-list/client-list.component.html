<div class="clients-page">
  <mat-card class="client-list-card">

    <!-- Header -->
    <div class="list-header">
      <div class="left">
        <h2>Clients</h2>
        <p class="sub">Manage all registered clients from one place.</p>
      </div>

      <!-- <button mat-flat-button color="primary" class="add-btn">
        <mat-icon>add</mat-icon>
        <span>Add Client</span>
      </button> -->
    </div>

    <!-- Search -->
    <div class="search-container">
      <mat-form-field appearance="outline" class="search-field">
        <mat-icon matPrefix>search</mat-icon>
        <input
          matInput
          placeholder="Search by name, email, team..."
          [(ngModel)]="searchTerm"
          (ngModelChange)="applyFilter()"
        />
      </mat-form-field>
    </div>

    <!-- Table -->
    <div class="table-wrapper">
      <table mat-table [dataSource]="dataSource" class="client-table">

        <!-- Name (avatar + name + email) -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef> Name </th>
          <td mat-cell *matCellDef="let c" class="name-cell">
            <div class="avatar">
              {{ (c.firstName || c.lastName || c.email)?.charAt(0) | uppercase }}
            </div>
            <div class="name-text">
              <div class="primary">
                {{
                  (c.firstName || c.lastName)
                    ? (c.firstName + ' ' + c.lastName)
                    : (c.email || 'â€”')
                }}
              </div>
              <div class="sub" *ngIf="c.firstName || c.lastName">
                {{ c.email }}
              </div>
            </div>
          </td>
        </ng-container>

        <!-- Email -->
        <ng-container matColumnDef="email">
          <th mat-header-cell *matHeaderCellDef> Email </th>
          <td mat-cell *matCellDef="let c">{{ c.email }}</td>
        </ng-container>

        <!-- Status -->
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef> Status </th>
          <td mat-cell *matCellDef="let c">
            <span
              class="status-pill"
              [ngClass]="{
                active: c.status === 'Active' || c.status === 'active',
                inactive: c.status === 'Inactive' || c.status === 'inactive'
              }"
            >
              {{ c.status }}
            </span>
          </td>
        </ng-container>

        <!-- Team -->
        <ng-container matColumnDef="team">
          <th mat-header-cell *matHeaderCellDef> Team </th>
          <td mat-cell *matCellDef="let c">{{ c.team }}</td>
        </ng-container>

        <!-- Created -->
        <ng-container matColumnDef="createdAt">
          <th mat-header-cell *matHeaderCellDef> Created </th>
          <td mat-cell *matCellDef="let c">
            {{ c.createdAt | date: 'MM/dd/yy' }}
          </td>
        </ng-container>

        <!-- Actions -->
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef class="actions-header">
            Actions
          </th>
          <td mat-cell *matCellDef="let c" class="actions-cell">
            <button
              mat-icon-button
              color="primary"
              matTooltip="Edit"
            >
              <mat-icon>edit</mat-icon>
            </button>
            <button
              mat-icon-button
              color="warn"
              (click)="deleteClient(c.id)"
              matTooltip="Delete"
            >
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>

        <!-- Header + Row -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: displayedColumns;"
          class="row-hover"
        ></tr>
      </table>
    </div>
  </mat-card>
</div>
